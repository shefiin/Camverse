<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Account</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Michroma&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Jost:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body style="font-family:'Open Sans', sans-serif";>

    <%- include('../partials/userNavbar') %>

    <section class="px-6 py-20 min-h-screen lg:px-12 lg:py-20 md-px-10 mt-8">

        <div class="px-6 py-20 lg:px-12 lg:py-20">
            <h1 class="text-2xl md:text-3xl text-gray-800 text-center mb-16">My Wishlist</h1>

            <div class="bg-white shadow-2xl p-6 space-y-3">
                <% if(wishlist && wishlist.items.length > 0) { %>
                  <% wishlist.items.forEach(item => { %>
                    <div class="flex flex-col md:flex-row items-center gap-4 border-b pb-4">
                      <!-- Product Image -->
                      <a href="/product/<%= item.product._id %>">
                          <img src="<%= item.product.images[0].url %>" alt="<%= item.product.name %>"
                               class="w-28 h-28 md:w-34 md:h-34 object-contain">
                      </a>
                      <!-- Product Info -->
                      <div class="flex-1 text-center md:text-left">
                        <a href="/product/<%= item.product._id %>"
                            class="text-lg font-semibold text-gray-800">
                            <%= item.product.name %>
                        </a>
                        
                        
                        <p class="text-sm text-gray-500 font-extralight">
                          Brand: 
                          <span class="text-blue-400 font-light text-sm"> 
                            <%= item.product.brand.name %> 
                          </span>
                        </p>

                        <p class="mt-1 text-gray-700 font-semibold">₹<%= item.product.price.toLocaleString() %></p>
                        <p class="mt-1 text-gray-400 line-through text-sm">₹<%= item.product.mrp.toLocaleString() %></p>
                        <p class="text-sm text-green-600">
                          (Save ₹<%= (item.product.mrp - item.product.price).toLocaleString() %>, 
                          <%= Math.round(((item.product.mrp - item.product.price) / item.product.mrp) * 100) %>% off)
                        </p>
                      </div>         
                   </div>

                   <!-- ✅ Actions Row (below the product card) -->
                    <div class="flex justify-around gap-3 mb-4 pb-2 border-b">
                      <form action="/wishlist/remove" method="POST">
                        <input type="hidden" name="productId" value="<%= item.product._id %>">
                        <input type="hidden" name="redirectTo" value="/wishlist">
                        <button class="text-red-500 text-base px-3 py-1 ml-20">
                          Remove
                        </button>
                      </form>
                      <div class="h-6 w-px bg-gray-300"></div>
                      <form action="/wishlist/move" method="POST">
                        <input type="hidden" name="productId" value="<%= item.product._id %>">
                        <input type="hidden" name="redirectTo" value="/wishlist">
                        <button class="text-blue-500 text-base px-3 py-1 mr-10">
                          Move to Cart
                        </button>
                      </form>
                    </div>
                  <% }) %>
                <% } else { %>
                  <p class="text-gray-500 font-extralight">Your Camverse wishlist is empty.</p>
                  <a href="/shop" class="text-blue-500 text-sm hover:underline">Continue shopping ></a>
                <% } %>
              </div>



        </div>
          
    </section>    

    <%- include('../partials/mobileFilter') %>

    <%- include('../partials/userFooter') %>

    <script src="/js/user/homePage.js"></script>
        

</body>
</html>        